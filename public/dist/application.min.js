"use strict";var ApplicationConfiguration=function(){var applicationModuleName="context",applicationModuleVendorDependencies=["ngResource","ngCookies","ngAnimate","ngTouch","ngSanitize","ui.router","ui.bootstrap","ui.utils"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("core"),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]),angular.module("core").controller("HomeController",["$scope","$sce","Keywords","Types",function($scope,$sce,Keywords){$scope.article={text:"lorem ipsum",keywords:[],getKeywords:function(){return this.keywords.map(function(k){return k.text})}},$scope.state="1",$scope.addKeyword=function(keyword,relevance,selected){relevance=relevance||1,selected=selected||!1;var newKeyword={};newKeyword.text=keyword,newKeyword.relevance=parseFloat(relevance),newKeyword.selected=selected,$scope.article.keywords.push(newKeyword)},$scope.getKeywords=function(){var article=$scope.article;Keywords.get({content:article.text},function(res){for(var keys=res.keywords,i=0;i<keys.length;i++)parseFloat(keys[i].relevance)>.8&&$scope.addKeyword(keys[i].text,keys[i].relevance)}),$scope.state="2"}}]),angular.module("core").directive("articleText",[function(){return{templateUrl:"modules/core/views/article-text.client.view.html",restrict:"E",link:function(){}}}]),angular.module("core").directive("instructions",[function(){return{templateUrl:"modules/core/views/instructions.client.view.html",restrict:"E",link:function(){}}}]),angular.module("core").directive("keywordSelection",[function(){return{templateUrl:"modules/core/views/keyword-selection.client.view.html",restrict:"E",link:function(scope){scope.resetNewKeyword=function(){scope.newKeyword=null}}}}]),angular.module("core").factory("Keywords",["$resource",function($resource){return $resource("/api/getKeywords",{},{})}]),angular.module("core").factory("Types",["$resource",function($resource){return $resource("/api/getTypes",{},{})}]);